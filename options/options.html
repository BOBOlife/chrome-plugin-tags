<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>网页收藏夹升级版</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="app-container">
    <!-- 侧边栏 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="9" cy="9" r="2"/>
            <path d="M21 15.5c-.6-.6-1.4-1-2.3-1s-1.7.4-2.3 1"/>
          </svg>
          <h1>收藏夹</h1>
        </div>
      </div>

      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3>视图</h3>
          <ul>
            <li><a href="#" data-view="all" class="nav-link active">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <path d="M9 9h.01M15 9h.01M9 15h.01M15 15h.01"/>
              </svg>
              全部收藏
            </a></li>
            <li><a href="#" data-view="recent" class="nav-link">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
              </svg>
              最近添加
            </a></li>
          </ul>
        </div>

        <div class="nav-section">
          <div class="section-header">
            <h3>文件夹</h3>
            <button id="addFolder" class="add-btn" title="新建文件夹">+</button>
          </div>
          <ul id="foldersList" class="folders-list">
            <!-- 文件夹列表将在这里动态生成 -->
          </ul>
        </div>
      </nav>

      <div class="sidebar-footer">
        <button id="syncBookmarks" class="footer-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="23,4 23,10 17,10"/>
            <polyline points="1,20 1,14 7,14"/>
            <path d="M20.49,9A9,9,0,0,0,5.64,5.64L1,10m22,4L18.36,18.36A9,9,0,0,1,3.51,15"/>
          </svg>
          同步浏览器书签
        </button>
        <button id="debugPermissions" class="footer-btn" style="background: #ff6b35; color: white;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M9,12l2,2l4,-4"/>
            <path d="M21,12c0,4.97 -4.03,9 -9,9s-9,-4.03 -9,-9s4.03,-9 9,-9s9,4.03 9,9z"/>
          </svg>
          调试权限
        </button>
        <button id="importExport" class="footer-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7,10 12,15 17,10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          导入/导出
        </button>
        <button id="settings" class="footer-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
          </svg>
          设置
        </button>
      </div>
    </aside>

    <!-- 主要内容区域 -->
    <main class="main-content">
      <!-- 搜索栏 -->
      <header class="search-header">
        <div class="search-container">
          <div class="search-input-wrapper">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            <input type="text" id="searchInput" placeholder="搜索标题、描述、网址..." class="search-input">
            <button id="clearSearch" class="clear-search" title="清除搜索">×</button>
          </div>
          <div class="search-filters">
            <select id="sortBy" class="filter-select">
              <option value="date">按日期排序</option>
              <option value="title">按标题排序</option>
              <option value="url">按网址排序</option>
            </select>
            <select id="viewMode" class="filter-select">
              <option value="card">卡片视图</option>
              <option value="list">列表视图</option>
              <option value="grid">网格视图</option>
            </select>
          </div>
        </div>
      </header>

      <!-- 工具栏 -->
      <div class="toolbar">
        <div class="toolbar-left">
          <span id="resultsCount" class="results-count">0 个结果</span>
          <div class="active-filters" id="activeFilters">
            <!-- 活动的过滤器标签 -->
          </div>
        </div>
        <div class="toolbar-right">
          <button id="selectAll" class="toolbar-btn">全选</button>
          <button id="deleteSelected" class="toolbar-btn danger" disabled>删除选中</button>
          <button id="exportSelected" class="toolbar-btn" disabled>导出选中</button>
        </div>
      </div>

      <!-- 内容区域 -->
      <div id="contentArea" class="content-area">
        <div id="bookmarksList" class="bookmarks-container">
          <!-- 书签列表将在这里动态生成 -->
        </div>

        <!-- 加载状态 -->
        <div id="loadingSpinner" class="loading-spinner hidden">
          <div class="spinner"></div>
          <p>加载中...</p>
        </div>

        <!-- 空状态 -->
        <div id="emptyState" class="empty-state hidden">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="9" cy="9" r="2"/>
            <path d="M21 15.5c-.6-.6-1.4-1-2.3-1s-1.7.4-2.3 1"/>
          </svg>
          <h3>暂无收藏</h3>
          <p>开始收藏您喜欢的网页吧！</p>
          <button id="addFirstBookmark" class="btn-primary">添加第一个收藏</button>
        </div>
      </div>

      <!-- 分页 -->
      <div id="pagination" class="pagination hidden">
        <button id="prevPage" class="page-btn" disabled>上一页</button>
        <div id="pageNumbers" class="page-numbers"></div>
        <button id="nextPage" class="page-btn">下一页</button>
      </div>
    </main>
  </div>

  <!-- 模态框 -->
  <!-- 编辑书签模态框 -->
  <div id="editBookmarkModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>编辑收藏</h3>
        <button class="modal-close">×</button>
      </div>
      <form id="editBookmarkForm" class="modal-form">
        <div class="form-group">
          <label for="editTitle">标题</label>
          <input type="text" id="editTitle" required>
        </div>
        <div class="form-group">
          <label for="editUrl">网址</label>
          <input type="url" id="editUrl" required>
        </div>
        <div class="form-group">
          <label for="editDescription">描述</label>
          <textarea id="editDescription" rows="3"></textarea>
        </div>
        <div class="form-group">
          <label for="editFolder">文件夹</label>
          <select id="editFolder"></select>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary modal-cancel">取消</button>
          <button type="submit" class="btn-primary">保存</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 新建文件夹模态框 -->
  <div id="newFolderModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>新建文件夹</h3>
        <button class="modal-close">×</button>
      </div>
      <form id="newFolderForm" class="modal-form">
        <div class="form-group">
          <label for="folderName">文件夹名称</label>
          <input type="text" id="folderName" required placeholder="输入文件夹名称">
        </div>
        <div class="form-group">
          <label for="folderDescription">描述（可选）</label>
          <textarea id="folderDescription" rows="2" placeholder="文件夹描述"></textarea>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-secondary modal-cancel">取消</button>
          <button type="submit" class="btn-primary">创建</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 导入导出模态框 -->
  <div id="importExportModal" class="modal hidden">
    <div class="modal-content large">
      <div class="modal-header">
        <h3>导入/导出数据</h3>
        <button class="modal-close">×</button>
      </div>
      <div class="modal-tabs">
        <button class="tab-btn active" data-tab="export">导出</button>
        <button class="tab-btn" data-tab="import">导入</button>
      </div>
      <div class="tab-content">
        <div id="exportTab" class="tab-pane active">
          <div class="export-options">
            <h4>导出格式</h4>
            <label><input type="radio" name="exportFormat" value="json" checked> JSON 格式</label>
            <label><input type="radio" name="exportFormat" value="html"> HTML 书签格式</label>
            <label><input type="radio" name="exportFormat" value="csv"> CSV 格式</label>
          </div>
          <div class="export-options">
            <h4>导出内容</h4>
            <label><input type="checkbox" id="exportBookmarks" checked> 收藏书签</label>
            <label><input type="checkbox" id="exportFolders" checked> 文件夹</label>
            <label><input type="checkbox" id="exportSettings"> 设置</label>
          </div>
          <div class="form-actions">
            <button id="exportData" class="btn-primary">导出数据</button>
          </div>
        </div>
        <div id="importTab" class="tab-pane">
          <div class="import-area">
            <div class="file-drop-zone" id="fileDropZone">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17,8 12,3 7,8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              <p>拖拽文件到此处或<button id="selectFile" class="link-btn">选择文件</button></p>
              <input type="file" id="fileInput" accept=".json,.html,.csv" style="display: none;">
            </div>
            <div class="import-options hidden" id="importOptions">
              <h4>导入选项</h4>
              <label><input type="checkbox" id="mergeData" checked> 合并现有数据</label>
              <label><input type="checkbox" id="overwriteDuplicates"> 覆盖重复项</label>
            </div>
          </div>
          <div class="form-actions">
            <button id="importData" class="btn-primary" disabled>导入数据</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 设置模态框 -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content large">
      <div class="modal-header">
        <h3>设置</h3>
        <button class="modal-close">×</button>
      </div>
      <div class="settings-content">
        <div class="settings-section">
          <h4>外观</h4>
          <div class="setting-item">
            <label>主题</label>
            <select id="themeSetting">
              <option value="light">浅色</option>
              <option value="dark">深色</option>
              <option value="auto">跟随系统</option>
            </select>
          </div>
          <div class="setting-item">
            <label>默认视图模式</label>
            <select id="defaultViewMode">
              <option value="card">卡片视图</option>
              <option value="list">列表视图</option>
              <option value="grid">网格视图</option>
            </select>
          </div>
          <div class="setting-item">
            <label>每页显示数量</label>
            <select id="itemsPerPage">
              <option value="10">10</option>
              <option value="20">20</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
        </div>
        <div class="settings-section">
          <h4>功能</h4>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="showDescriptions"> 显示网页描述
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="autoBackup"> 自动备份
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="syncEnabled"> 同步到云端
            </label>
          </div>
        </div>
        <div class="settings-section">
          <h4>数据管理</h4>
          <div class="setting-item">
            <button id="clearAllData" class="btn-danger">清除所有数据</button>
            <p class="setting-description">这将删除所有收藏、文件夹和设置</p>
          </div>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn-secondary modal-cancel">取消</button>
        <button id="saveSettings" class="btn-primary">保存设置</button>
      </div>
    </div>
  </div>

  <!-- Toast 通知 -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="options.js"></script>
</body>
</html>
